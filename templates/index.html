{% extends "layout.html" %}

{% block title %}
    Etoitau Libray
{% endblock %}

{% block content %}
<div class="content">
    <h3>Search</h3>
    <form action="{{ url_for('index') }}" method="post">
        <select name="select_field" required>
            {% if not select_field %}
                <option selected="true" disabled="disabled">Select</option>
            {% endif %}
            {% for value, name in [('isbn', 'ISBN'), ('title', 'Title'), ('author', 'Author'), ('pub_year', 'Year')] %}
                {% if select_field == value %}
                    <option selected = "true" value= "{{ value }} ">{{ name }}</option>
                {% else %}
                    <option value="{{ value }}">{{ name }}</option>
                {% endif %}
            {% endfor %}
        </select>    
        {% if not select_field %}
            <input autocomplete="off" autofocus name="search_string" type="text">
        {% else %}
            <input autocomplete="off" name="search_string" type="text" value="{{ search_string }}">
        {% endif %}
        <button type="submit">Go</button>
    </form>
    <br>
    {% if select_field %}
        <h3>Results</h3>
            <table class="searchtable">
                <thead>
                    <tr>
                        <th>Author</th><th>Title</th><th>Year</th><th>ISBN</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in search_results %}
                        <tr>
                            <td>{{ result.author }}</td><td>{{ result.title }}</td><td>{{ result.pub_year }}</td><td>{{ result.isbn }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>        
    {% endif %}
</div>
{% endblock %}
