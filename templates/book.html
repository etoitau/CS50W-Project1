{% extends "layout.html" %}

{% block title %}
    Etoitau Libray - {{ book.title }}
{% endblock %}

{% block content %}
<div class="content">
    <h3>Book Info</h3>
    <table>
        {% for field, value in [('Title', book.title), ('Author', book.author), ('Year', book.pub_year), ('ISBN', book.isbn)] %}
            <tr><td>{{ field }}: </td><td>{{ value }}</td></tr>
        {% endfor %}
    </table><br>
    <h3>Goodreads Info</h3>
    <table class="infotable">
        <tr><td>Average Rating</td><td>Number of Ratings</td></tr>
        <tr><td>{{ gr_avg }}</td><td>{{ gr_num }}</td></tr>
    </table><br>
    <h3>Reviews</h3>
    coming soon
    <!--
    <form action="{{ url_for('index') }}" method="post">
        <select name="select_field" required>
            {% if not select_field %}
                <option selected="true" disabled="disabled">Select</option>
            {% endif %}
            {% for value, name in [('isbn', 'ISBN'), ('title', 'Title'), ('author', 'Author'), ('pub_year', 'Year')] %}
                {% if select_field == value %}
                    <option value= "{{ value }}" selected = "true">{{ name }}</option>
                {% else %}
                    <option value="{{ value }}">{{ name }}</option>
                {% endif %}
            {% endfor %}
        </select>    
        {% if not select_field %}
            <input autocomplete="off" autofocus name="search_string" type="text">
        {% else %}
            <input autocomplete="off" name="search_string" type="text" value="{{ search_string }}">
        {% endif %}
        <button type="submit">Go</button>
    </form>
    <br>
    {% if select_field %}
        <h3>Results</h3>
        {% if results|length %}
            <table class="searchtable">
                <thead>
                    <tr>
                        <th>Author</th><th>Title</th><th>Year</th><th>ISBN</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in search_results %}
                        <tr>
                            <td>{{ result.author }}</td><td>{{ result.title }}</td><td>{{ result.pub_year }}</td><td>{{ result.isbn }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>   
        {% else %}
            No results found
        {% endif %}     
    {% endif %}
    -->
</div>
{% endblock %}
